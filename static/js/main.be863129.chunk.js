(this["webpackJsonpfe-2"]=this["webpackJsonpfe-2"]||[]).push([[0],{43:function(e,t,n){e.exports=n(70)},70:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),o=n(35),c=n.n(o),s=n(10),l=n(8),u=n(21),f=n(80),d=n(1),m=n(16),p=function(e){var t=e.to,n=e.className,a=void 0===n?"":n,o=Object(r.useContext)(ge),c=Object(d.f)();Object(f.a)().css;return i.a.createElement(m.b,{to:t,onClick:function(e){e.preventDefault(),o(!1),setTimeout((function(){c(t),o(!0)}),400)},className:a},e.children)},h=function(e){var t=e.pathname;return{extend:[{condition:(0,e.condition)(t),style:{textDecoration:"underline"}}]}};var v=function(e){var t=e.to,n=e.className,a=void 0===n?"":n,r=e.condition,o=void 0===r?function(e){return e.startsWith(t)}:r,c=Object(d.e)(),s=Object(f.a)({pathname:c.pathname,to:t,condition:o}).css;return i.a.createElement(p,{to:t,className:"".concat(s(h)," ").concat(a)},e.children)},b=function(){return{padding:"10px"}},g=function(){return{}},y=function(){return{":before":{content:'", "'}}},j=function(){return{display:"flex",flexDirection:"row"}};var O=function(e){var t=Object(r.useRef)(),n=e.setNavHeight,a=e.filterRoutes,o=Object(f.a)().css,c=Object(d.e)();function s(){var e=t.current.getBoundingClientRect().height;n(e+20)}return Object(r.useEffect)((function(){s()}),[c]),Object(r.useEffect)((function(){return s(),window.addEventListener("resize",s),function(){window.removeEventListener("resize",s)}}),[]),i.a.createElement("nav",{className:o(b)},i.a.createElement("ul",null,i.a.createElement("li",{ref:t,className:o(g)},i.a.createElement("ul",{className:o(j)},i.a.createElement("li",null,i.a.createElement(v,{to:"/",condition:function(e){return["/","/about"].includes(e)}},"no design foundry")),("/"===c.pathname||"/about"===c.pathname)&&i.a.createElement("li",null,i.a.createElement(v,{to:"/about",className:o(y),condition:function(e){return"/about"===e}},"about")))),"/"!==c.pathname&&a.map((function(e,t){return i.a.createElement("li",{key:"nav_".concat(t)},i.a.createElement("ul",{className:o(j)},i.a.createElement("li",{className:o(g)},i.a.createElement(v,{to:e.route},e.title)),c.pathname.startsWith(e.route)&&i.a.createElement("li",null,i.a.createElement(v,{to:"".concat(e.route,"/about"),className:o(y)},"about"))))}))))},w=[{type:"filterListView",route:"/"},{type:"filterDetailView",title:"Rotorizer",filterIdentifier:"rotorizer",route:"/rotorizer",numberOfLayers:2,layerColors:["gray","#000"],variableFontControlSliders:[{label:"rotation",tag:"RTTX",min:0,max:360,default:130}],inputs:[{type:"range",label:"depth",name:"depth",min:2,max:600,default:100}]},{type:"filterDetailView",title:"Rastr",filterIdentifier:"rasterizer",route:"/rasterizer",numberOfLayers:1,layerColors:["#000"],inputs:[{type:"range",label:"resolution",name:"resolution",min:10,max:150,default:20}]}];function E(e){var t=Object.keys(e).reduce((function(t,n){return t.push('"'.concat(n,'" ').concat(e[n])),t}),[]).join(", ");return t?{fontVariationSettings:t}:{}}var x=n(36),S={rasterizer:"<p>A font that had this filter applied to went through the process of rasterisation. It's the same rasterization that rasterizes fonts on your iPhone or a Android phone, a coffee machines or something completely else. Software behind it is called <a href=\"https://freetype.org/\">FreeType</a> and it's an open source rasterizer that is used in the industry. </p>\n<p>Such rasterisation is very complex process, it uses font's information called hinting. Hinting simply hints the rasterizer what to do. It can tell it to make sure to have this stroke the same amount of pixels as this stroke or show overshoot only if the font size is above 20px. If the font doesn't contain any hinting, then the rasterizer tries to do its best job.</p>\n<p>General rule is that fonts with suffix <code>.ttf</code> should have better displaying capabilities than fonts ending with <code>.otf</code>. Old classic as Verdana, Arial or Times New Roman perform very well when rasterised in small sizes. </p>\n<p>The smallest sizes in some of the older fonts were specially prepared as separate bitmaps. Someone was really there, drawing that system font bitmap of eight pixels!</p>",rotorizer:'<p>There was a typeface that was replaced by an algorithm, this typeface was called rotor and its distinctive feature was something that soon every font can turn into. </p>\n<p>I started working on rotor. First version were done by hand in FontLab, slowly after studying at <a href="https://typemedia.org/">TM</a> in the Hague,</p>',foundry:'<p>This is the type foundry without any typefaces. It contains collection of filters that can be applied on already existing fonts, the ones you already have. It tries to reuse and refresh already existing fonts and designs.</p>\n<p>This website doesn\'t store your fonts, your fonts are only processed on the server and send to you directly.</p>\n<p>This project is primarily work of <a href="https://www.jansindler.com">Jan \u0160indler</a>, but also of many others who directly or indirectly influenced this project. Thank you: Thom Janssen, Oli Sabin, David B\u0159ezina, Just Rossum &amp; everyone who keeps maintained all the libraries that I am using in this project.</p>'},C=function(){return{padding:"calc(1em - 10px) 10px 10px 10px",maxWidth:"50ch","& p + p":{marginTop:"1em"}}};var z=function(e){var t=e.identifier,n=Object(f.a)().css;return i.a.createElement("article",{className:n(C)},i.a.createElement(x.a,null,S[t]))},F=function(e){var t=e.previewedFontFamily,n=e.inListView,a=e.visible,r=e.color,i=e.marginBottom,o=e.marginTop;return{userSelect:"none",padding:"10px",transitionDuration:"".concat(350,"ms"),transitionProperty:"opacity, filter",transitionTimingFunction:"ease-in",whiteSpace:"nowrap",textRendering:"optimizeSpeed",marginBottom:"".concat(n||!n&&i?-.226:i,"em"),marginTop:"".concat(n||!n&&o?-.204:o,"em"),extend:[{condition:t,style:{fontFamily:t}},{condition:r,style:{color:r}},{condition:!a,style:{opacity:0,filter:"blur(.025em)"}}]}},N=function(e){var t=e.inListView;return{zIndex:-1,userSelect:"none",pointerEvents:"none",position:"absolute",top:0,left:0,width:"100vw",height:"100vh",display:"flex",transform:"translateZ(0)",alignItems:"center",justifyContent:t?"flex-start":"center",extend:[{condition:t,style:{height:"100%"}}]}};var I=function(e){var t=e.fontSize,n=e.inListView,o=void 0!==n&&n,c=e.fontFamily,l=e.fontVariations,u=void 0===l?{}:l,d=e.color,m=Object(r.useRef)(),p=Object(r.useState)(!1),h=Object(a.a)(p,2),v=h[0],b=h[1],g=Object(r.useState)(c),y=Object(a.a)(g,2),j=y[0],O=y[1],w=Object(r.useState)(e.children),x=Object(a.a)(w,2),S=x[0],C=x[1],z=Object(r.useContext)(R).fontPreviewMargins,I=z.marginBottom,k=z.marginTop;Object(r.useEffect)((function(){setTimeout((function(){b(!0)}),100)}),[]),Object(r.useEffect)((function(){c!==j&&(b(!1),setTimeout((function(){O(c),C(e.children),b(!0)}),400))}),[c]);var L=Object(f.a)({visible:v,inListView:o,previewedFontFamily:j,color:d,fontVariations:u,marginTop:k,marginBottom:I}).css;return i.a.createElement("div",{className:L(N),style:{fontSize:"".concat(t,"px")}},i.a.createElement("span",{ref:m,className:L(F),style:Object(s.a)({},E(u))},S))},k=Object(r.createContext)(),L=Object(r.createContext)(),T=Object(r.createContext)(),D=(Object(r.createContext)(),Object(r.createContext)()),V=Object(r.createContext)(),P=Object(r.createContext)(),R=Object(r.createContext)();var H=function(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),o=n[0],c=n[1],u=Object(r.useState)(null),f=Object(a.a)(u,2),d=f[0],m=f[1],p=Object(r.useState)({marginBottom:0,marginTop:0}),h=Object(a.a)(p,2),v=h[0],b=h[1],g=Object(r.useState)(ye.reduce((function(e,t){return e[t.filterIdentifier]=Array(t.numberOfLayers),e}),{})),y=Object(a.a)(g,2),j=y[0],O=y[1],w=Object(r.useState)(ye.reduce((function(e,t){return e[t.filterIdentifier]=t.title,e}),{})),E=Object(a.a)(w,2),x=E[0],S=E[1],C=Object(r.useState)(ye.reduce((function(e,t){var n;return e[t.filterIdentifier]=[].concat(Object(l.a)(t.inputs),Object(l.a)(null!==(n=null===t||void 0===t?void 0:t.variableFontControlSliders)&&void 0!==n?n:[])).reduce((function(e,t){return e[t.name]=t.default,e}),{fontSize:null}),e}),{})),z=Object(a.a)(C,2),F=z[0],N=z[1],I=Object(r.useState)(ye.reduce((function(e,t){return t.variableFontControlSliders&&(e[t.filterIdentifier]=t.variableFontControlSliders.reduce((function(e,t){return e[t.tag]=t.default,e}),{})),e}),{})),H=Object(a.a)(I,2),M=H[0],B=H[1],_=Object(r.useRef)(!1);return Object(r.useEffect)((function(){_.current}),[o]),Object(r.useEffect)((function(){_.current=!0}),[]),i.a.createElement(T.Provider,{value:{previewStrings:x,setPreviewString:function(e,t){var n=Object(s.a)({},x);n[e]=t,S(n)}}},i.a.createElement(V.Provider,{value:{previewedOutputFonts:j,setPreviewedOutputFonts:function(e,t){var n={};n[e]=t,O(Object(s.a)(Object(s.a)({},j),n))}}},i.a.createElement(P.Provider,{value:{fontVariations:M,setFontVariations:function(e,t,n){var a=Object(s.a)({},M);a[e][t]=parseInt(n),B(a)}}},i.a.createElement(k.Provider,{value:{formInputValues:F,setFormInputValue:function(e,t,n){var a=Object(s.a)({},F);a[e][t]=n,N(a)}}},i.a.createElement(L.Provider,{value:{inputFont:o,setInputFont:c}},i.a.createElement(D.Provider,{value:{previewedInputFont:d,setPreviewedInputFont:m}},i.a.createElement(R.Provider,{value:{fontPreviewMargins:v,setFontPreviewMargins:function(e){setTimeout((function(){b(e)}),350)}}},e.children)))))))},M=function(e){return function(){return{gridColumn:e}}},B=function(e){e.fileIsDragged;return{position:"fixed",fontSize:"4em",top:0,backgroundColor:"#fff",opacity:1,left:0,right:0,bottom:0}},_=function(){return{position:"absolute"}},A=function(){return{display:["none","inline"]}},W=function(){return{whiteSpace:"no-wrap"}};var X=function(e){var t,n=e.label,o=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useState)({}),l=Object(a.a)(s,2),u=l[0],d=l[1],m=Object(r.useContext)(L),p=m.inputFont,h=m.setInputFont,v=Object(r.useState)(!1),b=Object(a.a)(v,2),g=b[0],y=b[1],j=Object(f.a)({fileIsDragged:g}).css;function O(e){var t;e.preventDefault(),e.stopPropagation(),1===(null===(t=e.dataTransfer)||void 0===t?void 0:t.files.length)&&(h(e.dataTransfer.files[0]),c.current=null),y(!1)}function w(e){c.current="entered",e.preventDefault(),e.stopPropagation(),y(!0)}function E(e){"moving"===c.current&&(e.preventDefault(),e.stopPropagation(),y(!1),c.current="left")}function x(e){var t=e.clientX,n=e.clientY;d({left:t,top:n}),e.preventDefault(),e.stopPropagation()}return Object(r.useEffect)((function(){g?(document.body.querySelector("#root").style.pointerEvents="none",c.current="moving"):document.body.querySelector("#root").style.removeProperty("pointer-events")}),[g]),Object(r.useEffect)((function(){return document.body.addEventListener("dragenter",w),document.body.addEventListener("dragleave",E),document.body.addEventListener("dragover",x),document.body.addEventListener("drop",O),function(){document.body.removeEventListener("dragleave",E),document.body.removeEventListener("dragenter",w),document.body.removeEventListener("dragover",x),document.body.removeEventListener("drop",O)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:j(M(1))},n),i.a.createElement("input",{ref:o,type:"file",onChange:function(e){1===e.target.files.length&&h(e.target.files[0])},style:{display:"none"},accept:".ttf,.otf,woff,woff2"}),i.a.createElement("button",{className:j(M(3),W),onClick:function(e){o.current.click()}},i.a.createElement("span",null,null!==(t=null===p||void 0===p?void 0:p.name)&&void 0!==t?t:"select file"),!(null===p||void 0===p?void 0:p.name)&&i.a.createElement("span",{className:j(A)}," or drop it")),g&&i.a.createElement("div",{className:j(B)},i.a.createElement("span",{className:j(_),style:u},"Drop it")))},J=function(){return{fontVariantNumeric:"tabular-nums",padding:"0 .2em"}},Y=function(){return{height:"100%",display:"flex",flexDirection:"column"}},Z=function(){return{visibility:"hidden"}};var q=function(e){var t=e.label,n=e.name,o=e.min,c=e.max,s=e.value,l=e.onChange,u=e.animatable,d=void 0!==u&&u,m=e.disabled,p=void 0!==m&&m,h=Object(r.useRef)(),v=Object(r.useRef)(),b=Object(r.useState)(),g=Object(a.a)(b,2),y=g[0],j=g[1],O=Object(r.useContext)(te).filterIdentifier,w=Object(r.useContext)(k).setFormInputValue,E=Object(r.useState)(s),x=Object(a.a)(E,2),S=x[0],C=x[1],z=Object(f.a)({animating:y}).css;return Object(r.useEffect)((function(){return h.current.value=S,function(){clearInterval(v.current)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:z(M(1))},t),d&&i.a.createElement("button",{className:z(Y,M(2)),onClick:function(){if(!0===y)clearInterval(v.current);else{var e=0,t=S;v.current=setInterval((function(){var n=(t+e)%720,a=Math.round(n-360<0?n:360-n%360);C(a),h.current.value=a,l&&l(a);var r=10-(Math.cos(Math.PI*n/180)+1)/2*9;e+=r}),1e3/30)}j(!y)}},i.a.createElement("span",null,y?"stop":"play"),i.a.createElement("span",{className:z(Z),"aria-label":"hidden"},"play"),i.a.createElement("span",{className:z(Z),"aria-label":"hidden"},"stop")),i.a.createElement("input",{ref:h,className:z(M(3)),type:"range",onChange:function(e){if(h.current.checkValidity()){var t=parseInt(e.target.value);C(t),l&&l(e.target.value),n&&w(O,n,t)}},min:o,max:c,disabled:p}),i.a.createElement("div",{className:z(J),disabled:p},S))},G=function(){return{background:"transparent",outline:"none",border:"none"}};var U=function(e){var t=e.label,n=e.value,a=e.onChange,o=e.disabled,c=Object(r.useRef)(),s=Object(f.a)().css;return Object(r.useEffect)((function(){c.current.value=n}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:s(M(1))},t),i.a.createElement("input",{ref:c,className:s(G,M(3)),type:"text",onChange:function(){c.current.checkValidity()&&a&&a(c.current.value)},disabled:o}))},K=n(22),Q=n.n(K);var $,ee=function(e){var t=e.content;return i.a.createElement("ul",null,t.map((function(e,t){return i.a.createElement("li",{key:t},e)})))},te=Object(r.createContext)(),ne=function(){return{textAlign:"right"}},ae=function(e){e.innerHeight;return{top:0,position:"fixed",flexDirection:"column",height:"100%",display:"flex",justifyContent:"flex-end",transition:"height .05s ease-in"}},re=function(){return{pointerEvents:"all",display:"grid",gridTemplateColumns:["min-content min-content auto 3ch 5ch","repeat(4, min-content) 3ch"],width:["calc(100% - 10px)","auto"],gap:"0px 6px",gridAutoRows:"1.2em",whiteSpace:"nowrap",alignItems:"center",justifyContent:"center",marginBottom:"10px"}},ie=function(){return{minHeight:"100%",top:0,position:"absolute",width:"100%",display:"flex",flexDirection:"column",padding:"10px",pointerEvents:"none"}},oe=function(){return{display:"flex",alignItems:"flex-end",flexDirection:"row"}},ce=function(e){return{display:"block",animationName:{"0%":{paddingBottom:".5em"},"40%":{paddingBottom:"0"},"100%":{paddingBottom:"0"}},animationDuration:"1s",animationIterationCount:"infinite",animationDirection:"alternate-reverse",animationPlayState:e.isProcessing?"processing":"paused"}},se=function(){return{"@media(hover:none)":{display:"none"}}},le=Q.a.CancelToken;var ue=function(e){var t,n=e.inputs,o=e.variableFontControlSliders,c=e.filterIdentifier,s=e.fontSize,u=e.setFontSize,d=Object(r.useContext)(D),m=d.previewedInputFont,p=d.setPreviewedInputFont,h=Object(r.useState)(window.innerHeight),v=Object(a.a)(h,2),b=v[0],g=v[1],y=Object(r.useRef)(),j=Object(r.useRef)(null),O=Object(r.useState)([]),w=Object(a.a)(O,2),E=w[0],x=w[1],S=Object(r.useContext)(V).setPreviewedOutputFonts,C=Object(r.useContext)(k).formInputValues,z=Object(r.useRef)(s),F=Object(r.useContext)(L).inputFont,N=Object(r.useRef)(!1),H=Object(r.useRef)(void 0),B=Object(r.useContext)(T),_=B.previewStrings,A=B.setPreviewString,W=Object(r.useState)(_[c]),J=Object(a.a)(W,2),Y=J[0],Z=J[1],G=Object(r.useState)(!1),K=Object(a.a)(G,2),ue=K[0],fe=K[1],de=Object(r.useState)(!1),me=Object(a.a)(de,2),pe=me[0],he=me[1],ve=Object(r.useContext)(P),be=ve.fontVariations,ge=ve.setFontVariations,ye=Object(r.useContext)(R).setFontPreviewMargins,je=Object(f.a)({isProcessing:pe,innerHeight:b}).css;function Oe(e){switch(e.touches.length){case 2:var t=Object(a.a)(e.touches,2),n=t[0],r=n.pageX,i=n.pageY,o=t[1],c=o.pageX,s=o.pageY,l=2*Math.hypot(s-i,c-r);if(j.current){var f=z.current-(j.current-l);f>20&&(u(f),z.current=f)}j.current=l}}function we(e){j.current=null}function Ee(e){g(window.innerHeight)}return Object(r.useEffect)((function(){if(N.current&&F){var e=Date.now();$=e,setTimeout((function(){e===$&&(A(c,Y),function(){var e=new FormData;e.append("font_file",F),e.append("preview_string",Y),Object.keys(C[c]).forEach((function(t){return e.append(t,C[c][t])})),he(!0);var t={};Q()({method:"post",cancelToken:new le((function(e){H.current=e})),url:"http://0.0.0.0:5000/filters/".concat(c),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){x(e.data.warnings),e.data.margins&&(t=e.data.margins);var n=e.data.fonts.map((function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}));return Promise.all([F.arrayBuffer(),n])})).then((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return[new FontFace("preview-input-font-".concat(Date.now()),n),r.map((function(e,t){return new FontFace("preview-output-font-".concat(Date.now(),"-").concat(t),e)}))]})).then((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return document.fonts.add(n),r.map((function(e){return document.fonts.add(e)})),[n,r]})).then((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];p(n.family),S(c,r.map((function(e){return e.family})))})).catch((function(e){Q.a.isCancel(e)?console.log(e.message):console.log(e)})).finally((function(){he(!1),ye(t)}))}())}),500)}}),[C,F,Y,c]),Object(r.useEffect)((function(){return N.current=!0,document.body.style.touchAction="none",window.addEventListener("resize",Ee),window.addEventListener("touchmove",Oe),window.addEventListener("touchend",we),function(){window.removeEventListener("resize",Ee),window.removeEventListener("touchmove",Oe),window.removeEventListener("touchend",we),document.body.style.removeProperty("touch-action"),N.current=!1,fe(!1),void 0!==H.current&&(he(!1),H.current("cancelled by user"),H.current=void 0)}}),[]),i.a.createElement(te.Provider,{value:{filterIdentifier:c}},i.a.createElement("div",{className:je(ie)},i.a.createElement(I,{fontFamily:m,fontSize:s},_[c]),i.a.createElement("div",{className:je(ae)},pe&&i.a.createElement("div",{className:je(oe)},Object(l.a)("processing...........").map((function(e,t){return i.a.createElement("span",{key:"processing-".concat(t),className:je(ce,(function(){return{animationDelay:"".concat(t/10,"s")}}))},e)}))),i.a.createElement(ee,{content:E}),i.a.createElement("div",{ref:y,className:je(re)},null===o||void 0===o?void 0:o.map((function(e,t){return i.a.createElement(q,{label:e.label,key:"font_ui_".concat(t),min:e.min,max:e.max,tag:e.tag,value:be[c][e.tag],onChange:function(t){return ge(c,e.tag,t)}})})),i.a.createElement(q,{label:"font size",min:20,max:1e3,value:s,onChange:function(e){return u(e)},rules:[se]}),i.a.createElement(X,{label:"font file"}),i.a.createElement(U,{label:"preview",value:_[c],onChange:function(e){return Z(e)},disabled:!Boolean(F)}),n.map((function(e,t){switch(e.type){case"range":return i.a.createElement(q,{label:e.label,name:e.name,key:"input_".concat(c,"_").concat(t),min:e.min,max:e.max,value:C[c][e.name],disabled:!Boolean(F)});default:throw new Error("component not found")}})),i.a.createElement("button",{className:je(M(5),ne),onClick:function(){return fe(!ue)},disabled:!Boolean(F)},ue?"hide":"get"),ue&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",{className:je(M("1 / span 5"),(t="100%",function(){return{width:t}}))}),i.a.createElement(U,{label:"font name"}),i.a.createElement("button",{className:je(M("5"))},"download"),i.a.createElement(U,{label:"email"}),i.a.createElement("button",{className:je(M("5"))},"send"))))))},fe=function(e){var t=e.navHeight;return{marginTop:"".concat(t,"px")}};var de=function(e){var t=e.filterIdentifier,n=e.navHeight,a=e.layerColors,o=e.formHeight,c=e.fontSize,s=Object(r.useContext)(T).previewStrings,l=Object(r.useContext)(V).previewedOutputFonts,u=Object(r.useContext)(P).fontVariations,d=Object(f.a)({navHeight:n}).css;return i.a.createElement("div",{className:d(fe)},a.map((function(e,n){return i.a.createElement(I,{key:"".concat(t,"-overlay-").concat(n),fontFamily:l[t][n]||"".concat(t,"-").concat(n),fontSize:c,fontVariations:u[t],color:e,formHeight:o},s[t])})))},me=function(){return{}},pe=function(e){var t=e.fontSize;return{position:"relative",height:"".concat(1*t,"px")}};var he=function(e){var t=e.filterRoutes,n=e.fontSize,a=Object(f.a)({fontSize:n}).css;return i.a.createElement("ul",{className:a(me)},t.map((function(e){return i.a.createElement("li",{key:"list-view-".concat(e.route)},i.a.createElement(p,{to:e.route},i.a.createElement("div",{className:a(pe)},i.a.createElement(I,{fontSize:n,inListView:!0},e.title))))})))},ve=function(e){var t=e.navHeight;return{marginTop:"".concat(t,"px")}};var be=function(e){var t=e.filterRoutes,n=e.navHeight,a=e.fontSize,r=Object(f.a)({navHeight:n,fontSize:a}).css;return i.a.createElement("ul",{className:r(ve)},t.map((function(e){return i.a.createElement("li",{key:"overlay-link-".concat(e.route)},i.a.createElement(p,{to:e.route},i.a.createElement("div",{className:r(pe)},e.layerColors.map((function(t,n){var r;return i.a.createElement(I,{key:"overlay-font-preview-".concat(n),fontSize:a,inListView:!0,fontFamily:"".concat(e.filterIdentifier,"-").concat(n),color:t,fontVariations:(null!==(r=null===e||void 0===e?void 0:e.variableFontControlSliders)&&void 0!==r?r:[]).reduce((function(e,t){return e[t.tag]=t.default,e}),{})},e.title)})))))})))},ge=Object(r.createContext)(),ye=w.filter((function(e){return"filterDetailView"===e.type}));function je(){return ye.reduce((function(e,t){return e[t.filterIdentifier]=Math.ceil(function(e,t){var n=document.createElement("span");n.innerHTML=e,n.style.fontSize="200px",n.style.fontFamily=t,document.body.appendChild(n);var a=n.offsetWidth;return document.body.removeChild(n),Math.floor((document.body.clientWidth-20)/a*200)}(t.title,"vtt")),e}),{})}var Oe=function(e){var t=e.contentIsVisible,n=e.navHeight;return Object(u.a)({position:"fixed",bottom:0,width:"100%",height:"0px",left:0,background:"#ccc",transition:"height ".concat(350,"ms"),transform:"translateZ(0)",transitionTimingFunction:t?"cubic-bezier(.55,0,1,.45)":"cubic-bezier(0,.55,.45,1)"},"height",t?0:"calc(100% - ".concat(n-10,"px)"))},we=function(e){var t=e.isTouching,n=e.transitionWidth,a=e.transitionHeight;return{zIndex:-1,top:0,left:0,width:"100%",height:"100%",position:"absolute",background:"#eee",overflow:"hidden",transform:"translateZ(0)",extend:[{condition:t,style:{height:"100% !important"}},{condition:!t,style:{width:"100% !important"}},{condition:n|a,style:{transitionProperty:[].concat(Object(l.a)(n?["width"]:[]),Object(l.a)(a?["height"]:[])).join(","),transitionDuration:".05s",transitionTimingFunction:"ease-in"}}]}},Ee=function(){return{fontSize:["22px","18px"]}};var xe=function(){var e=Object(r.useState)(!0),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(je()),u=Object(a.a)(c,2),m=u[0],p=u[1],h=Object(r.useRef)(!1),v=Object(r.useState)(0),b=Object(a.a)(v,2),g=b[0],y=b[1],j=Object(r.useState)(!1),E=Object(a.a)(j,2),x=E[0],S=E[1],C=Object(r.useState)(!1),F=Object(a.a)(C,2),N=F[0],I=F[1],k=Object(r.useState)(!0),L=Object(a.a)(k,2),T=L[0],D=L[1],V=Object(r.useState)(Math.min.apply(Math,Object(l.a)(Object.values(je())))),P=Object(a.a)(V,2),R=P[0],M=P[1],B=Object(r.useRef)(),_=Object(r.useRef)(Date.now()),A=Object(f.a)({contentIsVisible:n,navHeight:g,isTouching:x,transitionWidth:N,transitionHeight:T}).css;function W(){Date.now()-_.current>500&&(S(!1),I(!1),T&&setTimeout((function(){D(!1)}),500))}function X(e){Date.now()-_.current>500&&(S(!1),D(!1),B.current.style.height="".concat(e.pageY,"px"))}function J(e){_.current=Date.now(),I(!0),S(!0),1===e.touches.length&&(B.current.style.width="".concat(e.touches[0].pageX,"px"))}function Y(e){var t;switch(I(!1),e.touches.length){case 1:t=e.touches[0].pageX;break;case 2:var n=Object(a.a)(e.touches,2),r=n[0].pageX,i=n[1].pageX;t=Math.min(r,i)+Math.abs(i-r)/2}B.current.style.width="".concat(t,"px")}function Z(e){M(Math.min.apply(Math,Object(l.a)(Object.values(je()))))}return Object(r.useEffect)((function(){return h.current=!0,window.addEventListener("resize",Z),window.addEventListener("mousemove",X,!1),document.body.addEventListener("mouseenter",W),window.addEventListener("touchstart",J),window.addEventListener("touchmove",Y),document.fonts.ready.then((function(){p(je()),M(Math.min.apply(Math,Object(l.a)(Object.values(je()))))})),function(){window.removeEventListener("resize",Z),window.removeEventListener("mousemove",X),document.body.removeEventListener("mouseenter",W),window.removeEventListener("touchstart",J),window.removeEventListener("touchmove",Y)}}),[]),i.a.createElement(ge.Provider,{value:o},i.a.createElement(H,null,i.a.createElement("div",{className:A(Ee)},i.a.createElement(O,{setNavHeight:y,filterRoutes:ye}),i.a.createElement("main",null,i.a.createElement(d.c,null,w.map((function(e,t){var n;switch(e.type){case"filterDetailView":n=i.a.createElement(ue,Object.assign({},e,{navHeight:g,key:e.route,fontSize:m[e.filterIdentifier],setFontSize:function(t){return function(e,t){var n=Object(s.a)({},m);n[e]=t,p(n)}(e.filterIdentifier,t)}}));break;case"filterListView":n=i.a.createElement(he,Object.assign({},e,{filterRoutes:ye,fontSize:R}))}return i.a.createElement(d.a,{path:e.route,element:n,key:"route_".concat(t)})})),ye.map((function(e,t){return i.a.createElement(d.a,{key:"about_route_".concat(t),path:"".concat(e.route,"/about"),element:i.a.createElement(z,{identifier:e.filterIdentifier})})})),i.a.createElement(d.a,{path:"/about",element:i.a.createElement(z,{identifier:"foundry"})}))),i.a.createElement("div",{className:A(Oe)}),i.a.createElement("div",{ref:B,className:A(we)},i.a.createElement(d.c,null,w.map((function(e,t){var n;switch(e.type){case"filterDetailView":n=i.a.createElement(de,Object.assign({},e,{navHeight:g,key:e.route,fontSize:m[e.filterIdentifier]}));break;case"filterListView":n=i.a.createElement(be,Object.assign({},e,{filterRoutes:ye,navHeight:g,fontSize:R}));break;default:throw new Error("not matched")}return i.a.createElement(d.a,{path:e.route,element:n,key:"overlay_route_".concat(t)})})))))))},Se=n(79),Ce=n(78),ze=n(37),Fe=n(38),Ne=n(39),Ie=n(40),ke=Object(Ce.a)({plugins:[Object(ze.a)(),Object(Fe.a)(),Object(Ie.a)(),Object(Ne.a)((function(e,t){switch(e.length){case 2:return["@media (min-width: 570px)"];default:return[]}}),{padding:!0,margin:!0,display:!0,fontSize:!0,gridTemplateColumns:!0,width:!0,height:!0})]});ke.renderStatic({boxSizing:"border-box",textDecoration:"None",fontFamily:"inherit",fontSize:"inherit",color:"inherit","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},"html,body,div,input,label,a,button");ke.renderStatic({fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"},"h1,h2,h3,h4,h5,h6,h6,h8");ke.renderStatic({padding:0,margin:0},"html,body,div,input,label,a,button,h1,h2,h3,h4,h5,h6,h6,h8,p");ke.renderStatic({fontFamily:"vtt, sans-serif",fontSize:"20px",maxWidth:"100vw",minHeight:"100vh",position:"relative",overscrollBehavior:"contain",overflow:"auto"},"body");ke.renderStatic({height:"100%",width:"100%"},"html");ke.renderStatic({margin:0,listStyleType:"None",padding:0},"ul");ke.renderStatic({whiteSpace:"nowrap",background:"transparent",outline:"none",border:"none",appearance:"none",textAlign:"left",textDecoration:"underline"},"button");ke.renderStatic({color:"gray",userSelect:"none",pointerEvents:"none"},"*[disabled]");ke.renderStatic({minWidth:"80px"},"input");ke.renderStatic({textDecoration:"underline"},"a.active");[["rasterizer-0","ttf"],["rotorizer-0","ttf"],["rotorizer-1","ttf"],["vtt","woff2"]].forEach((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return ke.renderFont(n,["".concat(n,".").concat(r)])})),c.a.render(i.a.createElement(m.a,null,i.a.createElement(Se.a,{renderer:ke},i.a.createElement(i.a.StrictMode,null,i.a.createElement(xe,null)))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.be863129.chunk.js.map