(this["webpackJsonpfe-2"]=this["webpackJsonpfe-2"]||[]).push([[0],{43:function(e,t,n){e.exports=n(72)},72:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),o=n.n(r),i=n(35),c=n.n(i),u=n(12),l=n(7),s=n(82),f=n(2),d=n(16),m=function(){return{textDecoration:"None"}},p=function(e){var t=e.to,n=e.className,a=void 0===n?"":n,i=(Object(r.useContext)(Ee),Object(f.f)(),Object(s.a)().css);return o.a.createElement(d.b,{to:t,onClick:function(e){},className:"".concat(i(m)," ").concat(a)},e.children)},b=function(e){var t=e.pathname;return{extend:[{condition:(0,e.condition)(t),style:{textDecoration:"underline !important"}}]}};var h=function(e){var t=e.to,n=e.className,a=void 0===n?"":n,r=e.condition,i=void 0===r?function(e){return e.startsWith(t)}:r,c=Object(f.e)(),u=Object(s.a)({pathname:c.pathname,to:t,condition:i}).css;return o.a.createElement(p,{to:t,className:"".concat(u(b)," ").concat(a)},e.children)},v=function(){return{padding:"10px"}},g=function(){return{}},y=function(){return{":before":{content:'", "'}}},j=function(){return{display:"flex",flexDirection:"row"}};var O=function(e){var t=Object(r.useRef)(),n=e.setNavHeight,a=e.filterRoutes,i=Object(s.a)().css,c=Object(f.e)();function u(){var e=t.current.getBoundingClientRect().height;n(e+20)}return Object(r.useEffect)((function(){u()}),[c]),Object(r.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[]),o.a.createElement("nav",{className:i(v)},o.a.createElement("ul",null,o.a.createElement("li",{ref:t,className:i(g)},o.a.createElement("ul",{className:i(j)},o.a.createElement("li",null,o.a.createElement(h,{to:"/",condition:function(e){return["/","/about"].includes(e)}},"no design foundry")),("/"===c.pathname||"/about"===c.pathname)&&o.a.createElement("li",null,o.a.createElement(h,{to:"/about",className:i(y),condition:function(e){return"/about"===e}},"about")))),"/"!==c.pathname&&a.map((function(e,t){return o.a.createElement("li",{key:"nav_".concat(t)},o.a.createElement("ul",{className:i(j)},o.a.createElement("li",{className:i(g)},o.a.createElement(h,{to:e.route},e.title)),c.pathname.startsWith(e.route)&&o.a.createElement("li",null,o.a.createElement(h,{to:"".concat(e.route,"/about"),className:i(y)},"about"))))}))))},w=[{type:"filterListView",route:"/"},{type:"filterDetailView",title:"Rotorizer",filterIdentifier:"rotorizer",route:"/rotorizer",numberOfLayers:2,layerColors:["gray","#000"],variableFontControlSliders:[{label:"rotation",tag:"RTTX",min:0,max:360,default:130}],inputs:[{type:"range",label:"depth",name:"depth",min:2,max:600,default:100}]},{type:"filterDetailView",title:"Rastr",filterIdentifier:"rasterizer",route:"/rasterizer",numberOfLayers:1,layerColors:["#000"],inputs:[{type:"range",label:"resolution",name:"resolution",min:10,max:150,default:20}]}];function E(e){var t=Object.keys(e).reduce((function(t,n){return t.push('"'.concat(n,'" ').concat(e[n])),t}),[]).join(", ");return t||null}var x=n(36),S=function(e){return function(){return{gridColumn:e}}},C=function(e){return{transition:"opacity .35s ease-in",opacity:e.mounted?1:0}},k={rasterizer:"<p>A font that had this filter applied on went through the process of rasterisation. It's the same rasterization that rasterizes fonts on your iPhone or a Android phone, a coffee machines or something completely else. Software behind it is called <a href=\"https://freetype.org/\" target=\"_blank\">FreeType</a> and it's an open source rasterizer that is used in the industry. </p>\n<p>Such rasterisation is very complex process, it uses font's information called hinting. Hinting simply hints the rasterizer what to do. It can tell it to make sure to have this stroke the same amount of pixels as this stroke or show overshoot only if the font size is above 20px. If the font doesn't contain any hinting, then the rasterizer tries to do its best job.</p>\n<p>General rule is that fonts with suffix <code>.ttf</code> should have better displaying capabilities than fonts ending with <code>.otf</code>. Old classic as Verdana, Arial or Times New Roman perform very well when rasterised in small sizes. </p>\n<p>The smallest sizes in some of the older fonts were specially prepared as separate bitmaps. Someone was really there, drawing that system font bitmap of eight pixels!</p>",rotorizer:"<p>There was a typeface that was soon replaced by an algorithm, this typeface's only distinctive feature was something that soon every font can turn into.</p>\n<p>The font is dead, long live the algorithm!</p>\n<p>It was a long journey of slowly learning how to automate my tedious inhuman workflow to produce the variable font until completely automating it.</p>\n<p>It already asks the question of our future lives, are we gonna be all replaced by an algorithm? What kind of work will humans do? Only the creative one? I don't know, but lets leave production of such fonts to an algorithm.</p>",foundry:'<p>This is the type foundry without any typefaces. It contains collection of filters that can be applied on already existing fonts, the ones you already have. It tries to reuse and refresh already existing fonts and designs.</p>\n<p>This website doesn\'t store your fonts, your fonts are only processed on the server and send to you directly.</p>\n<p>This project is primarily work of <a href="https://www.jansindler.com" target="_blank">Jan \u0160indler</a>, but also of many others who directly or indirectly influenced this project. Thank you: <a href="https://www.hallotype.nl/" target="_blank">Thom Janssen</a>, <a href="https://www.youtube.com/watch?v=7uNYg98YTNI" target="_blank">Oli Sabin</a>, <a href="https://rosettatype.com/" target="_blank">David B\u0159ezina</a>, Just van Rossum &amp; everyone at <a href="https://typemedia.org/" target="_blank">TM</a> &amp; everyone who keeps maintained all the libraries that I am using in this project.</p>'},z=function(){return{padding:"calc(1em - 10px) 10px 10px 10px",maxWidth:"50ch","& p + p":{marginTop:"1em"}}};var F=function(e){var t=e.identifier,n=Object(r.useState)(!1),i=Object(a.a)(n,2),c=i[0],u=i[1];Object(r.useEffect)((function(){return u(!0),function(){u(!1)}}),[]);var l=Object(s.a)({mounted:c}).css;return o.a.createElement("article",{className:l(z,C)},o.a.createElement(x.a,null,k[t]))},I=Object(r.createContext)(),N=Object(r.createContext)(),T=Object(r.createContext)(),D=Object(r.createContext)(),V=Object(r.createContext)(),R=Object(r.createContext)(),L=Object(r.createContext)(),P=Object(r.createContext)(),H=Object(r.createContext)(),M=function(e){var t=e.dragIndicationVisible;return{zIndex:1e3,position:"fixed",top:0,right:0,bottom:0,left:0,background:"#eee",transition:"opacity ".concat(100,"ms ease-in"),opacity:t?1:0}},B=function(){return{position:"absolute",whiteSpace:"nowrap",fontSize:"50px"}};var _=function(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),i=n[0],c=n[1],f=Object(r.useState)(null),d=Object(a.a)(f,2),m=d[0],p=d[1],b=Object(r.useState)({marginBottom:0,marginTop:0}),h=Object(a.a)(b,2),v=h[0],g=h[1],y=Object(r.useState)(!1),j=Object(a.a)(y,2),O=j[0],w=j[1],E=Object(r.useState)(!1),x=Object(a.a)(E,2),S=x[0],C=x[1],k=Object(r.useRef)(),z=Object(r.useRef)([]);Object(r.useEffect)((function(){S&&w(!0)}),[S]),Object(r.useEffect)((function(){O||setTimeout((function(){C(!1)}),100)}),[O]);var F=Object(r.useState)(xe.reduce((function(e,t){return e[t.filterIdentifier]=Array(t.numberOfLayers),e}),{})),_=Object(a.a)(F,2),W=_[0],A=_[1],X=Object(r.useState)(xe.reduce((function(e,t){return e[t.filterIdentifier]=t.title,e}),{})),Y=Object(a.a)(X,2),J=Y[0],q=Y[1],Z=Object(r.useState)(xe.reduce((function(e,t){var n;return e[t.filterIdentifier]=[].concat(Object(l.a)(t.inputs),Object(l.a)(null!==(n=null===t||void 0===t?void 0:t.variableFontControlSliders)&&void 0!==n?n:[])).reduce((function(e,t){return e[t.name]=t.default,e}),{fontSize:null}),e}),{})),G=Object(a.a)(Z,2),U=G[0],K=G[1],Q=Object(r.useState)(xe.reduce((function(e,t){return t.variableFontControlSliders&&(e[t.filterIdentifier]=t.variableFontControlSliders.reduce((function(e,t){return e[t.tag]=t.default,e}),{})),e}),{})),$=Object(a.a)(Q,2),ee=$[0],te=$[1],ne=Object(r.useRef)(!1);Object(r.useEffect)((function(){ne.current}),[i]),Object(r.useEffect)((function(){ne.current=!0}),[]);var ae=Object(s.a)({dragIndicationVisible:O}).css;return o.a.createElement(T.Provider,{value:{previewStrings:J,setPreviewString:function(e,t){var n=Object(u.a)({},J);n[e]=t,q(n)}}},o.a.createElement(V.Provider,{value:{previewedOutputFonts:W,setPreviewedOutputFonts:function(e,t){var n={};n[e]=t,A(Object(u.a)(Object(u.a)({},W),n))}}},o.a.createElement(R.Provider,{value:{fontVariations:ee,setFontVariations:function(e,t,n){var a=Object(u.a)({},ee);a[e][t]=parseInt(n),te(a)}}},o.a.createElement(I.Provider,{value:{formInputValues:U,setFormInputValue:function(e,t,n){var a=Object(u.a)({},U);a[e][t]=n,K(a)}}},o.a.createElement(N.Provider,{value:{inputFont:i,setInputFont:c}},o.a.createElement(D.Provider,{value:{previewedInputFont:m,setPreviewedInputFont:p}},o.a.createElement(L.Provider,{value:{fontPreviewMargins:v,setFontPreviewMargins:function(e){setTimeout((function(){g(e)}),350)}}},o.a.createElement(P.Provider,{value:z},o.a.createElement(H.Provider,{value:function(e){e?(C(!0),k.current.style.left=e.left+"px",k.current.style.top=e.top+"px"):w(!1)}},S?o.a.createElement("div",{className:ae(M)},o.a.createElement("div",{ref:k,className:ae(B)},"Drop it!")):o.a.createElement(o.a.Fragment,null),e.children)))))))))},W=function(e){var t=e.fontFamily,n=e.inListView,a=(e.visible,e.color),r=e.marginBottom,o=e.marginTop,i=e.fontVariations;return{userSelect:"none",whiteSpace:"nowrap",textRendering:"optimizeSpeed",marginBottom:"".concat(n||!n&&r?-.226:r,"em"),marginTop:"".concat(n||!n&&o?-.204:o,"em"),transform:"translateZ(0)",willChange:"font-size, font-variation-settings, opacity, filter",fontFamily:t||"unset",extend:[{condition:a,style:{color:a}},{condition:i,style:{fontVariationSettings:E(i)}}]}},A=function(e){var t=e.inListView;return{zIndex:-1,userSelect:"none",position:"absolute",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:t?"flex-start":"center",extend:[{condition:t,style:{height:"100%"}}]}};var X=o.a.memo((function(e){var t=e.inListView,n=void 0!==t&&t,a=e.color,i=e.children,c=e.fontVariations,u=void 0===c?{}:c,l=e.fontSize,f=Object(r.useRef)(),d=Object(r.useContext)(L).fontPreviewMargins,m=d.marginBottom,p=d.marginTop,b=Object(r.useContext)(P);Object(r.useEffect)((function(){b&&b.current.push(f.current)}),[]),Object(r.useEffect)((function(){f.current.style.fontSize=l+"px"}),[l]);var h=Object(s.a)({inListView:n,color:a,marginTop:p,marginBottom:m,fontVariations:u}).css;return o.a.createElement("div",{className:h(A)},o.a.createElement("span",{ref:f,className:h(W)},i))}));var Y=function(e){var t=e.content;return t.length?o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement("li",{key:t},e)}))):o.a.createElement(o.a.Fragment,null)},J=n(19),q=n.n(J),Z=function(){return{background:"transparent",outline:"none",border:"none"}};var G=function(e){var t=e.label,n=e.value,a=e.onChange,i=e.disabled,c=Object(r.useRef)(),u=Object(s.a)().css;return Object(r.useEffect)((function(){c.current.value=n}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:u(S(1)),disabled:i},t),o.a.createElement("input",{ref:c,className:u(Z,S(2)),type:"text",onChange:function(){c.current.checkValidity()&&a&&a(c.current.value)},disabled:i}))},U=function(){return{fontVariantNumeric:"tabular-nums",padding:"0 .2em"}},K=["12px","8px"],Q=function(e){var t=e.position;return{appearance:"none","-webkit-appearance":"none",height:["12px","8px"],borderRadius:K,boxShadow:"inset 0 2px 2px #00000066","&::-webkit-slider-thumb, &::-moz-range-thumb":{appearance:"none","-webkit-appearance":"none",height:["26px","18px"],width:["26px","18px"],background:"#333",borderRadius:"100%",filter:"drop-shadow(0 2px 3px #00000066)",border:"none",outline:"none",cursor:"pointer"},background:"#EEE","&::-moz-range-progress":{boxShadow:"inset 0 2px 2px #00000066",background:"#CCC",height:"100%",borderRadius:K},"@supports not selector(::-moz-range-progress)":{background:"linear-gradient(to right, #CCC 0%, #CCC ".concat(t,"%, #EEE ").concat(t,"%, #EEE 100%)"),"&:disabled":{background:"linear-gradient(to right, #DDD 0%, #DDD ".concat(t,"%, #EEE ").concat(t,"%, #EEE 100%) !important")}},"&:disabled":{"&::-webkit-slider-thumb, &::-moz-range-thumb":{background:"#EEE"}}}};var $=function(e){var t=e.className,n=e.label,i=e.name,c=e.min,u=e.max,l=e.value,f=e.onChange,d=(e.animatable,e.disabled),m=void 0!==d&&d,p=Object(r.useRef)(),b=Object(r.useRef)(),h=Object(r.useState)(),v=Object(a.a)(h,2),g=v[0],y=(v[1],Object(r.useContext)(de).filterIdentifier),j=Object(r.useContext)(I).setFormInputValue,O=Object(r.useState)(l),w=Object(a.a)(O,2),E=w[0],x=w[1],C=Object(s.a)({animating:g,position:E/u*100}).css;return Object(r.useEffect)((function(){return p.current.value=E,function(){clearInterval(b.current)}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:[C(S(1)),t].join(" "),disabled:m},n),o.a.createElement("input",{ref:p,className:[C(S(2),Q),t].join(" "),type:"range",onChange:function(e){if(p.current.checkValidity()){var t=parseInt(e.target.value);x(t),f&&f(e.target.value),i&&j(y,i,t)}},min:c,max:u,disabled:m}),o.a.createElement("div",{className:[C(U),t].join(" "),disabled:m},E))},ee=function(){return{display:["none","inline"]}},te=function(){return{whiteSpace:"no-wrap"}};var ne,ae=o.a.memo((function(e){var t,n=e.label,i=Object(r.useRef)(),c=Object(r.useRef)(),u=Object(r.useContext)(H),l=Object(r.useContext)(N),f=l.inputFont,d=l.setInputFont,m=Object(r.useState)(!1),p=Object(a.a)(m,2),b=p[0],h=(p[1],Object(s.a)({fileIsDragged:b}).css);function v(e){var t;e.preventDefault(),e.stopPropagation(),1===(null===(t=e.dataTransfer)||void 0===t?void 0:t.files.length)&&(d(e.dataTransfer.files[0]),c.current=null),u(!1)}function g(e){e.preventDefault(),e.stopPropagation(),c.current="entered";var t=e.clientX,n=e.clientY;u({left:t,top:n})}function y(e){"moving"===c.current&&(e.preventDefault(),e.stopPropagation(),u(!1),c.current="left")}function j(e){e.preventDefault(),e.stopPropagation();var t=e.clientX,n=e.clientY;u({left:t,top:n})}return Object(r.useEffect)((function(){b?(document.body.querySelector("#root").style.pointerEvents="none",c.current="moving"):document.body.querySelector("#root").style.removeProperty("pointer-events")}),[b]),Object(r.useEffect)((function(){return document.body.addEventListener("dragenter",g),document.body.addEventListener("dragleave",y),document.body.addEventListener("dragover",j),document.body.addEventListener("drop",v),function(){document.body.removeEventListener("dragleave",y),document.body.removeEventListener("dragenter",g),document.body.removeEventListener("dragover",j),document.body.removeEventListener("drop",v)}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:h(S(1))},n),o.a.createElement("input",{ref:i,type:"file",onChange:function(e){1===e.target.files.length&&d(e.target.files[0])},style:{display:"none"},accept:".ttf,.otf,woff,woff2"}),o.a.createElement("button",{className:h(S(2),te),onClick:function(e){i.current.click()}},o.a.createElement("span",null,null!==(t=null===f||void 0===f?void 0:f.name)&&void 0!==t?t:"select file"),!(null===f||void 0===f?void 0:f.name)&&o.a.createElement("span",{className:h(ee)}," or drop it")))})),re=(n(66),function(){return{display:"flex",alignItems:"flex-end",flexDirection:"row"}}),oe=function(e){return{display:"block",animationName:{"0%":{paddingBottom:".5em"},"40%":{paddingBottom:"0"},"100%":{paddingBottom:"0"}},animationDuration:"1s",animationIterationCount:"infinite",animationDirection:"alternate-reverse",animationPlayState:e.isProcessing?"processing":"paused"}},ie=function(){return{bottom:0,position:"fixed",transform:"translateZ(0)",flexDirection:"column",display:"flex",justifyContent:"flex-end",transition:"height .05s ease-in"}},ce=function(){return{pointerEvents:"all",display:"grid",gridTemplateColumns:["auto auto 3ch auto","repeat(4, min-content) 3ch"],width:["calc(100% - 10px)","auto"],gap:"0px 6px",gridAutoRows:"1.2em",whiteSpace:"nowrap",alignItems:"center",justifyContent:"center",marginBottom:"10px"}},ue=q.a.CancelToken;var le=function(e){var t=e.filterIdentifier,n=e.inputs,i=e.fontSize,c=e.variableFontControlSliders,u=Object(r.useContext)(I).formInputValues,f=Object(r.useContext)(V).setPreviewedOutputFonts,d=Object(r.useContext)(L).setFontPreviewMargins,m=Object(r.useContext)(N).inputFont,p=Object(r.useContext)(R).fontVariations,b=Object(r.useContext)(T),h=b.previewStrings,v=b.setPreviewString,g=Object(r.useContext)(D).setPreviewedInputFont,y=Object(r.useContext)(P).current,j=Object(r.useRef)(),O=Object(r.useRef)(void 0),w=Object(r.useState)([]),x=Object(a.a)(w,2),k=x[0],z=x[1],F=Object(r.useState)(!1),H=Object(a.a)(F,2),M=H[0],B=H[1],_=Object(r.useState)(h[t]),W=Object(a.a)(_,2),A=W[0],X=W[1],J=Object(r.useState)(!1),Z=Object(a.a)(J,2),U=Z[0],K=Z[1],Q=Object(r.useState)(!1),ee=Object(a.a)(Q,2),te=ee[0],le=ee[1];Object(r.useEffect)((function(){return B(!0),function(){K(!1),void 0!==O.current&&(le(!1),O.current("cancelled by user"),O.current=void 0)}}),[]);var se=Object(s.a)({mounted:M}).css;function fe(){var e=new FormData;return e.append("font_file",m),e.append("preview_string",A),Object.keys(u[t]).forEach((function(n){return e.append(n,u[t][n])})),e}return Object(r.useEffect)((function(){if(M&&m){var e=Date.now();ne=e,setTimeout((function(){e===ne&&(v(t,A),function(){var e=fe();le(!0);var n={};q()({method:"post",cancelToken:new ue((function(e){O.current=e})),url:"http://0.0.0.0:5000/filters/".concat(t),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){z(e.data.warnings),e.data.margins&&(n=e.data.margins);var t=e.data.fonts.map((function(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}));return Promise.all([m.arrayBuffer(),t])})).then((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return[new FontFace("preview-input-font-".concat(Date.now()),n),r.map((function(e,t){return new FontFace("preview-output-font-".concat(Date.now(),"-").concat(t),e)}))]})).then((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return document.fonts.add(n),r.map((function(e){return document.fonts.add(e)})),[n,r]})).then((function(e){var n=Object(a.a)(e,2),r=n[0],o=n[1];g(r.family),f(t,o.map((function(e){return e.family})))})).catch((function(e){q.a.isCancel(e)?console.log(e.message):console.log(e)})).finally((function(){le(!1),d(n)}))}())}),500)}}),[u,m,A,t]),o.a.createElement("div",{className:se(ie,C)},te&&o.a.createElement("div",{className:se(re)},Object(l.a)("processing...........").map((function(e,t){return o.a.createElement("span",{key:"processing-".concat(t),className:se(oe,(function(){return{animationDelay:"".concat(t/10,"s")}}))},e)}))),o.a.createElement(Y,{content:k}),o.a.createElement("div",{ref:j,className:se(ce)},null===c||void 0===c?void 0:c.map((function(e,n){return o.a.createElement($,{label:e.label,key:"font_ui_".concat(n),min:e.min,max:e.max,tag:e.tag,value:p[t][e.tag],onChange:function(e){y.forEach((function(t){return t.style.fontVariationSettings=E({RTTX:e})}))}})})),o.a.createElement($,{label:"font size",min:20,max:1e3,value:i,onChange:function(e){return y.forEach((function(t){return t.style.fontSize=e+"px"}))}}),o.a.createElement(ae,{label:"font file"}),o.a.createElement(G,{label:"preview",value:h[t],onChange:function(e){return X(e)},disabled:!Boolean(m)}),n.map((function(e,n){switch(e.type){case"range":return o.a.createElement($,{label:e.label,name:e.name,key:"input_".concat(t,"_").concat(n),min:e.min,max:e.max,value:u[t][e.name],disabled:!Boolean(m)});default:throw new Error("component not found")}})),o.a.createElement("button",{className:se(S(4),C),onClick:function(){return K(!U)},disabled:!Boolean(m)},U?"hide":"get"),U&&o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",{className:se(S("1 / span 5"))}),o.a.createElement(G,{name:"font_name",label:"font name",value:"My Font"}),o.a.createElement("button",{className:se(S("5")),onClick:function(){var e=fe();q()({method:"post",url:"http://0.0.0.0:5000/filters/".concat(t,"/get"),data:e,headers:{"Content-Type":"multipart/form-data"},responseType:"blob"}).then((function(e){console.log(e)}))}},"download"))))},se=function(e){var t=e.visible,n=e.fontFamily,a=e.color;return{lineHeight:0,transitionDuration:"".concat(350,"ms"),transitionTimingFunction:"ease-in",transitionProperty:"opacity, filter",opacity:t?1:0,fontFamily:n,color:a}};var fe=o.a.memo((function(e){var t=e.fontFamily,n=e.children,i=e.color,c=Object(r.useState)(null),u=Object(a.a)(c,2),l=u[0],f=u[1],d=Object(r.useState)(n),m=Object(a.a)(d,2),p=m[0],b=m[1],h=Object(r.useState)(!1),v=Object(a.a)(h,2),g=v[0],y=v[1];Object(r.useEffect)((function(){return y(!0),function(){y(!1)}}),[]),Object(r.useEffect)((function(){y(!1),setTimeout((function(){f(t),b(n)}),350)}),[t,n]),Object(r.useEffect)((function(){setTimeout((function(){y(!0)}),100)}),[l,p]);var j=Object(s.a)({visible:g,fontFamily:l,color:i}).css;return o.a.createElement("div",{className:j(se)},p)})),de=Object(r.createContext)(),me=function(){return{minHeight:"100%",top:0,position:"absolute",width:"100%",display:"flex",flexDirection:"column",padding:"10px",pointerEvents:"none",overflow:"hidden"}};var pe=function(e){var t=e.inputs,n=e.variableFontControlSliders,i=e.filterIdentifier,c=e.fontSize,u=(e.setFontSize,Object(r.useContext)(D).previewedInputFont),l=Object(r.useContext)(T).previewStrings,f=Object(r.useState)(window.innerHeight),d=Object(a.a)(f,2),m=d[0],p=d[1],b=Object(r.useRef)(!1),h=Object(s.a)({innerHeight:m}).css,v=Object(r.useContext)(P);function g(e){p(window.innerHeight)}return Object(r.useEffect)((function(){return b.current=!0,document.body.style.touchAction="none",window.addEventListener("resize",g),function(){window.removeEventListener("resize",g),document.body.style.removeProperty("touch-action"),b.current=!1,v.current=[]}}),[]),o.a.createElement(de.Provider,{value:{filterIdentifier:i}},o.a.createElement("div",{className:h(me)},o.a.createElement(X,{fontSize:c},o.a.createElement(fe,{fontFamily:u},l[i])),o.a.createElement(le,{variableFontControlSliders:n,filterIdentifier:i,inputs:t,fontSize:c})))},be=function(e){var t=e.navHeight;return{marginTop:"".concat(t,"px")}};var he=o.a.memo((function(e){var t=e.filterIdentifier,n=e.navHeight,a=e.layerColors,i=e.formHeight,c=e.fontSize,u=Object(r.useContext)(T).previewStrings,l=Object(r.useContext)(V).previewedOutputFonts,f=Object(r.useContext)(R).fontVariations,d=Object(s.a)({navHeight:n}).css;return o.a.createElement("div",{className:d(be)},o.a.createElement(X,{key:"".concat(t,"-overlay"),fontVariations:f[t],formHeight:i,layerColors:a,fontSize:c},a.map((function(e,n){return o.a.createElement(fe,{key:"".concat(t,"-overlay-layer-").concat(n),fontFamily:l[t][n]||"".concat(t,"-").concat(n),color:e},u[t])}))))})),ve=function(){return{}},ge=function(e){var t=e.fontSize;return{position:"relative",height:"".concat(1*t,"px")}};var ye=function(e){var t=e.filterRoutes,n=e.fontSize,a=Object(s.a)({fontSize:n}).css;return o.a.createElement("ul",{className:a(ve)},t.map((function(e){return o.a.createElement("li",{key:"list-view-".concat(e.route)},o.a.createElement(p,{to:e.route},o.a.createElement("div",{className:a(ge)},o.a.createElement(X,{fontSize:n,inListView:!0},o.a.createElement(fe,null,e.title)))))})))},je=n(22),Oe=function(e){var t=e.navHeight;return{marginTop:"".concat(t,"px")}};var we=o.a.memo((function(e){var t=e.filterRoutes,n=e.navHeight,a=e.fontSize,r=Object(s.a)({navHeight:n,fontSize:a}).css;return o.a.createElement("ul",{className:r(Oe)},t.map((function(e){var t;return o.a.createElement("li",{key:"overlay-link-".concat(e.route)},o.a.createElement(p,{to:e.route},o.a.createElement("div",{className:r(ge)},o.a.createElement(X,{key:"overlay-font-preview-".concat(e.route),fontSize:a,inListView:!0,fontVariations:(null!==(t=null===e||void 0===e?void 0:e.variableFontControlSliders)&&void 0!==t?t:[]).reduce((function(e,t){return e[t.tag]=t.default,e}),{})},e.layerColors.map((function(t,n){return o.a.createElement(fe,Object(je.a)({color:t,key:"listViewOverlay-".concat(t,"-").concat(n),fontFamily:"".concat(e.filterIdentifier,"-").concat(n)},"color",t),e.title)}))))))})))})),Ee=Object(r.createContext)(),xe=w.filter((function(e){return"filterDetailView"===e.type}));function Se(){return xe.reduce((function(e,t){return e[t.filterIdentifier]=Math.ceil(function(e,t){var n=document.createElement("span");n.innerHTML=e,n.style.fontSize="200px",n.style.fontFamily=t,document.body.appendChild(n);var a=n.offsetWidth;return document.body.removeChild(n),Math.floor((document.body.clientWidth-20)/a*200)}(t.title,"vtt")),e}),{})}var Ce=function(e){var t=e.isTouching,n=e.transitionWidth,a=e.transitionHeight;return{zIndex:-1,top:0,left:0,width:"100%",height:"100%",position:"absolute",background:"#eee",overflow:"hidden",transform:"translateZ(0)",extend:[{condition:t,style:{height:"100% !important"}},{condition:!t,style:{width:"100% !important"}},{condition:n|a,style:{transitionProperty:[].concat(Object(l.a)(n?["width"]:[]),Object(l.a)(a?["height"]:[])).join(","),transitionDuration:".15s",transitionTimingFunction:"linear"}}]}},ke=function(){return{fontSize:["23px","19px"],lineHeight:["1.3em","1.15em"]}};var ze=function(){var e=Object(r.useRef)(window.innerWidth),t=Object(r.useState)(!0),n=Object(a.a)(t,2),i=n[0],c=n[1],d=Object(r.useState)(Se()),m=Object(a.a)(d,2),p=m[0],b=m[1],h=Object(r.useRef)(!1),v=Object(r.useState)(0),g=Object(a.a)(v,2),y=g[0],j=g[1],E=Object(r.useState)(!1),x=Object(a.a)(E,2),S=x[0],C=x[1],k=Object(r.useState)(!1),z=Object(a.a)(k,2),I=z[0],N=z[1],T=Object(r.useState)(!0),D=Object(a.a)(T,2),V=D[0],R=D[1],L=Object(r.useState)(Math.min.apply(Math,Object(l.a)(Object.values(Se())))),P=Object(a.a)(L,2),H=P[0],M=P[1],B=Object(r.useRef)(),W=Object(r.useRef)(Date.now()),A=Object(s.a)({contentIsVisible:i,navHeight:y,isTouching:S,transitionWidth:I,transitionHeight:V}).css;function X(){Date.now()-W.current>500&&(C(!1),N(!1),V&&setTimeout((function(){}),500))}function Y(e){V&&(B.current.clientHeight-10<=e.pageY&&R(!1));Date.now()-W.current>500&&(B.current.style.height="".concat(e.pageY,"px"))}function J(e){W.current=Date.now(),N(!0),C(!0),1===e.touches.length&&(B.current.style.width="".concat(e.touches[0].pageX,"px"))}function q(e){var t;switch(N(!1),e.touches.length){case 1:t=e.touches[0].pageX;break;case 2:var n=Object(a.a)(e.touches,2),r=n[0].pageX,o=n[1].pageX;t=Math.min(r,o)+Math.abs(o-r)/2}B.current.style.width="".concat(t,"px")}function Z(t){var n=window.innerWidth;n!==e.current&&(M(Math.min.apply(Math,Object(l.a)(Object.values(Se())))),e.current=n)}Object(r.useEffect)((function(){return h.current=!0,window.addEventListener("resize",Z),window.addEventListener("mousemove",Y,!1),document.body.addEventListener("mouseenter",X),window.addEventListener("touchstart",J),window.addEventListener("touchmove",q),document.fonts.ready.then((function(){b(Se()),M(Math.min.apply(Math,Object(l.a)(Object.values(Se()))))})),function(){window.removeEventListener("resize",Z),window.removeEventListener("mousemove",Y),document.body.removeEventListener("mouseenter",X),window.removeEventListener("touchstart",J),window.removeEventListener("touchmove",q)}}),[]);var G=[].concat(Object(l.a)(w),Object(l.a)(w.reduce((function(e,t){return e.push({type:"about",route:("/"!==t.route?t.route:"")+"/about",identifier:"/"!==t.route?t.filterIdentifier:"foundry"}),e}),[]))),U=Object(f.e)();return Object(r.useEffect)((function(){return c(!1),setTimeout((function(){c(!0)}),3500),function(){}}),[U.pathname]),o.a.createElement(Ee.Provider,{value:c},o.a.createElement(_,null,o.a.createElement("div",{className:A(ke)},o.a.createElement(O,{setNavHeight:j,filterRoutes:xe}),o.a.createElement("main",null,o.a.createElement(f.c,null,G.map((function(e,t){var n;switch(e.type){case"filterDetailView":n=o.a.createElement(pe,Object.assign({},e,{navHeight:y,key:e.route,fontSize:p[e.filterIdentifier],setFontSize:function(t){return function(e,t){var n=Object(u.a)({},p);n[e]=t,b(n)}(e.filterIdentifier,t)}}));break;case"filterListView":n=o.a.createElement(ye,Object.assign({},e,{filterRoutes:xe,fontSize:H}));break;case"about":n=o.a.createElement(F,{identifier:e.identifier})}return o.a.createElement(f.a,{path:e.route,element:n,key:"route_".concat(t)})})))),o.a.createElement("div",{ref:B,className:A(Ce)},o.a.createElement(f.c,null,w.map((function(e,t){var n;switch(e.type){case"filterDetailView":n=o.a.createElement(he,Object.assign({},e,{navHeight:y,key:e.route,fontSize:p[e.filterIdentifier]}));break;case"filterListView":n=o.a.createElement(we,Object.assign({},e,{filterRoutes:xe,navHeight:y,fontSize:H}));break;default:throw new Error("not matched")}return o.a.createElement(f.a,{path:e.route,element:n,key:"overlay_route_".concat(t)})})))))))},Fe=n(81),Ie=n(80),Ne=n(37),Te=n(38),De=n(39),Ve=n(40),Re=Object(Ie.a)({plugins:[Object(Ne.a)(),Object(Te.a)(),Object(Ve.a)(),Object(De.a)((function(e,t){switch(e.length){case 2:return["@media (min-width: 800px)"];default:return[]}}),{padding:!0,margin:!0,display:!0,fontSize:!0,gridTemplateColumns:!0,lineHeight:!0,width:!0,height:!0,borderRadius:!0})]});Re.renderStatic({boxSizing:"border-box",fontFamily:"inherit",fontSize:"inherit",color:"inherit","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","&:focus":{outline:"none",background:"none",boxShadow:"none"}},"html,body,div,input,label,a,button");Re.renderStatic({fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit"},"h1,h2,h3,h4,h5,h6,h6,h8");Re.renderStatic({padding:0,margin:0},"html,body,div,input,label,a,button,h1,h2,h3,h4,h5,h6,h6,h8,p");Re.renderStatic({fontFamily:"vtt, sans-serif",maxWidth:"100vw",minHeight:"100vh",touchAction:"pan-y",position:"relative",overscrollBehavior:"contain",overflow:"auto"},"body");Re.renderStatic({height:"100%",width:"100%"},"html");Re.renderStatic({margin:0,listStyleType:"None",padding:0},"ul");Re.renderStatic({whiteSpace:"nowrap",background:"transparent",outline:"none",border:"none",appearance:"none",textAlign:"left",textDecoration:"underline"},"button");Re.renderStatic({color:"#CCC",userSelect:"none",pointerEvents:"none",opacity:"1 !important","-webkit-text-fill-color":"#CCC"},"*[disabled]");Re.renderStatic({minWidth:"80px"},"input");Re.renderStatic({textDecoration:"underline"},"a.active");[["rasterizer-0","ttf"],["rotorizer-0","ttf"],["rotorizer-1","ttf"],["vtt","woff2"]].forEach((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return Re.renderFont(n,["".concat(n,".").concat(r)])})),c.a.render(o.a.createElement(d.a,null,o.a.createElement(Fe.a,{renderer:Re},o.a.createElement(o.a.StrictMode,null,o.a.createElement(ze,null)))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.784c7aa3.chunk.js.map